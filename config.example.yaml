# OnWatch Automation Configuration - Example Template
# Copy this file to config.yaml and update with your actual values
# Use environment variables for sensitive data: ${ENV_VAR_NAME} or $ENV_VAR_NAME

# OnWatch System Connection
onwatch:
  ip_address: "10.1.71.14"  # OnWatch system IP address
  username: "Administrator"  # OnWatch admin username
  password: "${ONWATCH_PASSWORD}"  # Use environment variable for password
  base_url: "https://10.1.71.14"  # Base URL (usually https://<ip_address>)

# SSH Configuration (for translation file upload)
ssh:
  ip_address: "10.1.71.14"  # Usually same as onwatch IP
  username: "user"  # SSH user (will sudo to root for translation-util)
  password: "${SSH_PASSWORD}"  # SSH password (use env var for security)
  sudo_password: "${SSH_SUDO_PASSWORD}"  # Sudo password (leave empty to use SSH password)
  translation_util_path: "/opt/ansible-installer-1.4.0-8/support-scripts/translation-util"  # Path to translation-util script

# Rancher Configuration (for Kubernetes environment variables)
rancher:
  ip_address: "10.1.71.14"  # Rancher server IP
  port: 9443  # Rancher port (usually 9443)
  username: "admin"  # Rancher username
  password: "${RANCHER_PASSWORD}"  # Rancher password (use env var)
  base_url: "https://10.1.71.14:9443"  # Rancher base URL
  workload_path: "/p/local:p-p6l45/workloads/run?launchConfigIndex=-1&namespaceId=default&upgrade=true&workloadId=statefulset%3Adefault%3Acv-engine"  # Workload path (update workloadId if needed)

# KV Parameters (key-value settings)
kv_parameters:
  "applicationSettings/watchVideo/secondsAfterDetection": 6
  "applicationSettings/watchVideo/secondsBeforeDetection": 6
  "applicationSettings/defaultFaceThreshold": 0.6
  "applicationSettings/maskClassifier/threshold": 0.7
  "DEFAULT/collate-service/TRACKS_RETENTION_TIME_MS": 80000

# System Settings
system_settings:
  general:
    blur_all_faces_except_selected: false
    discard_detections_not_in_watch_list: false
    body_image_retention_period: "13h"
    default_face_threshold: 0.61
    default_body_threshold: 0.61
    default_liveness_threshold: 0.55
  
  map:
    seed_location:
      lat: 34.01993376317111
      long: -118.50479101075484
    acknowledge: true
    action_title: "call the police"
    masks_access_control: false
  
  system_interface:
    translation_file: "assets/Polski-updated3.json.json"  # Path to translation file (relative to project root)
    product_name: "metropolis"
    icons: ""  # Path to icons directory (optional)
  
  engine:
    video_storage:
      all_videos_days: 6
      videos_with_detections_days: 6
    detection_storage_days: 8
    alert_storage_days: 9
    inquiry_storage_days: 8

# Environment Variables (set via Rancher)
env_vars:
  ENABLE_DVR: "True"
  OVERWRITE_FFMPEG_OPTIONS_VALUES: "ffmpeg-opts:rtsp_transport=udp_multicast,probesize=1000000000,stimeout=10000000,buffer_size=1048576,analyzeduration=10000000;v2urisourcebin:stream-connect-timeout=20"
  SERVICE_TAGS: "engine-service,body-from-face-pipeline,body-pipeline,dvr,face-pipeline,ffmpeg-options,forensics,gdpr,image-processing,live-stream,roi,watch-video,webrtc"
  SERVICE_DOMAIN: "cv-engine.default"
  CUDA_DEVICE_ORDER: "PCI_BUS_ID"

# Device/Camera Settings
devices:
  - name: "face camera"
    video_url: "rtsp://10.1.70.16:8554/Faces720"
    details:
      threshold: 0.5
      location:
        name: "holon"
        long: 34.800
        lat: 32.007
    calibration:
      tracker: 4
      face_track_length:
        min: 0.5
        max: 11
      calibration_tool:
        padding:
          top: 130
          right: 1768
          bottom: 1060
          left: 201
        detection_min_size: 48
    security_access:
      liveness: true
      liveness_threshold: 0.6

# Groups Configuration
groups:
  subject_groups:
    - name: "OnPatrol subject"
      authorization: "Always Unauthorized"
      visibility: "Silent"
      priority: 1
      description: "OnPatrol subject group"
    - name: "Cardholders"
      authorization: "Always Authorized"
      visibility: "Visible"
      priority: 2
      description: "Cardholders group"

# Accounts Configuration
accounts:
  users:
    - username: "Test"
      first_name: "test"
      last_name: "test"
      email: "test@test.com"
      role: "operator"
      user_group: "full data group"
      password: "Test123123!"
    - username: "Administrator"
      first_name: "admin"
      last_name: "admin"
      email: ""
      role: "super admin"
      user_group: "full data group"
      password: ""
  
  user_groups:
    - title: "testUser group"
      subject_groups: []
      camera_groups: []
    - title: "Full Data Group"
      subject_groups: ["OnPatrol subject", "Cardholders"]
      camera_groups: []

# Watch List (Subjects)
watch_list:
  subjects:
    - name: "Yonatan"
      images:
        - path: "assets/images/me.jpg"
        - path: "assets/images/me2.jpg"
      group: "Default Group"

# Inquiries Configuration
inquiries:
  - name: "upgrade test"
    priority: "Medium"
    files:
      "Neo.mp4":
        path: "assets/videos/Neo.mp4"
        settings: "default"
      "Neo.webm":
        path: "assets/videos/Neo.webm"
        settings: "custom"  # Will use custom ROI and threshold

# Mass Import Configuration
mass_import:
  name: "mass-import 43"
  file_path: "assets/mass-import/mass-import-43.tar"
  group: "Cardholders"  # Subject group to attach import to

